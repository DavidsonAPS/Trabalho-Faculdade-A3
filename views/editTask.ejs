<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editar Tarefa</title>

    <link rel="stylesheet" href="/css/style.css">

    <style>
        .container { max-width: 600px; margin: 40px auto; }
        .form-group { margin-bottom: 15px; text-align: left; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: bold; }
        .form-group input, .form-group textarea, .form-group select {
            width: calc(100% - 20px); padding: 10px; border: 1px solid #ddd; border-radius: 4px;
        }
        .button-group { margin-top: 20px; }
        .button-group button, .button-group a {
            padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-size: 16px;
            text-decoration: none; display: inline-block; margin-right: 10px;
        }
        .button-group button { background: #007bff; color: white; }
        .button-group a { background: #6c757d; color: white; }
        .error-message { color: #dc3545; margin-top: 10px; font-weight: bold; }
    </style>
</head>
<body>

    <div class="container">
        <h1>Editar Tarefa</h1>

        <% if (typeof error !== "undefined" && error) { %>
            <p class="error-message"><%= error %></p>
        <% } %>

        <form action="/tasks/edit/<%= task.id %>" method="POST">

            <div class="form-group">
                <label for="title">Título:</label>
                <input type="text" id="title" name="title" value="<%= task.title %>" required>
            </div>

            <div class="form-group">
                <label for="description">Descrição:</label>
                <textarea id="description" name="description" rows="4"><%= task.description %></textarea>
            </div>

            <div class="form-group">
                <label for="priority">Prioridade:</label>
                <select id="priority" name="priority">
                    <option value="Baixa" <%= task.priority === 'Baixa' ? 'selected' : '' %>>Baixa</option>
                    <option value="Média" <%= task.priority === 'Média' ? 'selected' : '' %>>Média</option>
                    <option value="Alta" <%= task.priority === 'Alta' ? 'selected' : '' %>>Alta</option>
                </select>
            </div>

            <div class="form-group">
                <label for="category">Categoria:</label>
                <input type="text" id="category" name="category" value="<%= task.category %>">
            </div>

            <div class="form-group">
                <label for="due_date">Data de Conclusão:</label>
                <input 
                    type="date"
                    id="due_date"
                    name="due_date"
                    value="<%= task.due_date ? task.due_date.substring(0,10) : '' %>"
                >
            </div>

            <div class="form-group">
                <label>
                    <input type="checkbox" id="completed" name="completed" <%= task.completed ? 'checked' : '' %> >
                    Tarefa Concluída
                </label>
            </div>

            <div class="button-group">
                <button type="submit">Salvar Alterações</button>
                <a href="/tasks">Cancelar</a>
            </div>
        </form>
    </div>

</body>
</html>
